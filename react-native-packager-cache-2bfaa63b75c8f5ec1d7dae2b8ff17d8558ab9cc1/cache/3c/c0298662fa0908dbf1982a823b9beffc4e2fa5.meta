["d50e05416ad36c5bd560d73bd47fced295fccd98","6b0640807a186db00859bb2c8140f7a6036edf09",["./Path","@firebase/util","./util"],[99,131,171,203,243],{"version":3,"sources":["/home/giise/candidtwo/node_modules/@firebase/database/dist/cjs/src/core/util/validation.js"],"names":["Object","defineProperty","exports","value","Path_1","require","util_1","util_2","util_3","util_4","INVALID_KEY_REGEX_","INVALID_PATH_REGEX_","MAX_LEAF_SIZE_","isValidKey","key","length","test","isValidPathString","pathString","isValidRootPathString","replace","isValidPriority","priority","isInvalidJSONNumber","contains","validateFirebaseDataArg","fnName","argumentNumber","data","path","optional","undefined","validateFirebaseData","errorPrefix","path_","Path","ValidationPath","Error","toErrorString","toString","stringLength","substring","hasDotValue_1","hasActualChild_1","forEach","push","pop","validateFirebaseMergePaths","mergePaths","i","curPath","keys","slice","j","sort","comparePaths","prevPath","validateFirebaseMergeDataArg","Array","isArray","child","getBack","validatePriority","validateEventType","eventType","validateKey","validatePathString","validateRootPathString","validateWritablePath","getFront","validateUrl","parsedUrl","repoInfo","host","namespace","validateCredential","cred","validateBoolean","bool","validateString","string","validateObject","obj","validateObjectContainsKey","opt_type","objectContainsKey","val","safeGet"],"mappings":"AAAA;;AAgBAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C,EAAEC,OAAO,IAAT,EAA7C;AACA,IAAIC,SAASC,QAAQ,QAAR,CAAb;AACA,IAAIC,SAASD,OAAT,kBAAJ;AACA,IAAIE,SAASF,QAAQ,QAAR,CAAb;AACA,IAAIG,SAASH,OAAT,kBAAJ;AACA,IAAII,SAASJ,OAAT,kBAAJ;;AAMAH,QAAQQ,kBAAR,GAA6B,gCAA7B;;AAOAR,QAAQS,mBAAR,GAA8B,8BAA9B;;AAMAT,QAAQU,cAAR,GAAyB,KAAK,IAAL,GAAY,IAArC;;AAKAV,QAAQW,UAAR,GAAqB,UAAUC,GAAV,EAAe;AAChC,WAAQ,OAAOA,GAAP,KAAe,QAAf,IAA2BA,IAAIC,MAAJ,KAAe,CAA1C,IAA+C,CAACb,QAAQQ,kBAAR,CAA2BM,IAA3B,CAAgCF,GAAhC,CAAxD;AACH,CAFD;;AAOAZ,QAAQe,iBAAR,GAA4B,UAAUC,UAAV,EAAsB;AAC9C,WAAQ,OAAOA,UAAP,KAAsB,QAAtB,IACJA,WAAWH,MAAX,KAAsB,CADlB,IAEJ,CAACb,QAAQS,mBAAR,CAA4BK,IAA5B,CAAiCE,UAAjC,CAFL;AAGH,CAJD;;AASAhB,QAAQiB,qBAAR,GAAgC,UAAUD,UAAV,EAAsB;AAClD,QAAIA,UAAJ,EAAgB;AAEZA,qBAAaA,WAAWE,OAAX,CAAmB,kBAAnB,EAAuC,GAAvC,CAAb;AACH;AACD,WAAOlB,QAAQe,iBAAR,CAA0BC,UAA1B,CAAP;AACH,CAND;;AAWAhB,QAAQmB,eAAR,GAA0B,UAAUC,QAAV,EAAoB;AAC1C,WAAQA,aAAa,IAAb,IACJ,OAAOA,QAAP,KAAoB,QADhB,IAEH,OAAOA,QAAP,KAAoB,QAApB,IAAgC,CAACf,OAAOgB,mBAAP,CAA2BD,QAA3B,CAF9B,IAGHA,YAAY,OAAOA,QAAP,KAAoB,QAAhC,IAA4ChB,OAAOkB,QAAP,CAAgBF,QAAhB,EAA0B,KAA1B,CAHjD;AAIH,CALD;;AAeApB,QAAQuB,uBAAR,GAAkC,UAAUC,MAAV,EAAkBC,cAAlB,EAAkCC,IAAlC,EAAwCC,IAAxC,EAA8CC,QAA9C,EAAwD;AACtF,QAAIA,YAAYF,SAASG,SAAzB,EACI;AACJ7B,YAAQ8B,oBAAR,CAA6BxB,OAAOyB,WAAP,CAAmBP,MAAnB,EAA2BC,cAA3B,EAA2CG,QAA3C,CAA7B,EAAmFF,IAAnF,EAAyFC,IAAzF;AACH,CAJD;;AAYA3B,QAAQ8B,oBAAR,GAA+B,UAAUC,WAAV,EAAuBL,IAAvB,EAA6BM,KAA7B,EAAoC;AAC/D,QAAIL,OAAOK,iBAAiB9B,OAAO+B,IAAxB,GAA+B,IAAI/B,OAAOgC,cAAX,CAA0BF,KAA1B,EAAiCD,WAAjC,CAA/B,GAA+EC,KAA1F;AACA,QAAIN,SAASG,SAAb,EAAwB;AACpB,cAAM,IAAIM,KAAJ,CAAUJ,cAAc,qBAAd,GAAsCJ,KAAKS,aAAL,EAAhD,CAAN;AACH;AACD,QAAI,OAAOV,IAAP,KAAgB,UAApB,EAAgC;AAC5B,cAAM,IAAIS,KAAJ,CAAUJ,cACZ,sBADY,GAEZJ,KAAKS,aAAL,EAFY,GAGZ,mBAHY,GAIZV,KAAKW,QAAL,EAJE,CAAN;AAKH;AACD,QAAIhC,OAAOgB,mBAAP,CAA2BK,IAA3B,CAAJ,EAAsC;AAClC,cAAM,IAAIS,KAAJ,CAAUJ,cAAc,WAAd,GAA4BL,KAAKW,QAAL,EAA5B,GAA8C,GAA9C,GAAoDV,KAAKS,aAAL,EAA9D,CAAN;AACH;;AAED,QAAI,OAAOV,IAAP,KAAgB,QAAhB,IACAA,KAAKb,MAAL,GAAcb,QAAQU,cAAR,GAAyB,CADvC,IAEAH,OAAO+B,YAAP,CAAoBZ,IAApB,IAA4B1B,QAAQU,cAFxC,EAEwD;AACpD,cAAM,IAAIyB,KAAJ,CAAUJ,cACZ,iCADY,GAEZ/B,QAAQU,cAFI,GAGZ,cAHY,GAIZiB,KAAKS,aAAL,EAJY,GAKZ,KALY,GAMZV,KAAKa,SAAL,CAAe,CAAf,EAAkB,EAAlB,CANY,GAOZ,OAPE,CAAN;AAQH;;AAGD,QAAIb,QAAQ,OAAOA,IAAP,KAAgB,QAA5B,EAAsC;AAClC,YAAIc,gBAAgB,KAApB;AAAA,YAA2BC,mBAAmB,KAA9C;AACArC,eAAOsC,OAAP,CAAehB,IAAf,EAAqB,UAAUd,GAAV,EAAeX,KAAf,EAAsB;AACvC,gBAAIW,QAAQ,QAAZ,EAAsB;AAClB4B,gCAAgB,IAAhB;AACH,aAFD,MAGK,IAAI5B,QAAQ,WAAR,IAAuBA,QAAQ,KAAnC,EAA0C;AAC3C6B,mCAAmB,IAAnB;AACA,oBAAI,CAACzC,QAAQW,UAAR,CAAmBC,GAAnB,CAAL,EAA8B;AAC1B,0BAAM,IAAIuB,KAAJ,CAAUJ,cACZ,4BADY,GAEZnB,GAFY,GAGZ,IAHY,GAIZe,KAAKS,aAAL,EAJY,GAKZ,oCALY,GAMZ,oDANE,CAAN;AAOH;AACJ;AACDT,iBAAKgB,IAAL,CAAU/B,GAAV;AACAZ,oBAAQ8B,oBAAR,CAA6BC,WAA7B,EAA0C9B,KAA1C,EAAiD0B,IAAjD;AACAA,iBAAKiB,GAAL;AACH,SAnBD;AAoBA,YAAIJ,iBAAiBC,gBAArB,EAAuC;AACnC,kBAAM,IAAIN,KAAJ,CAAUJ,cACZ,2BADY,GAEZJ,KAAKS,aAAL,EAFY,GAGZ,kCAHE,CAAN;AAIH;AACJ;AACJ,CA3DD;;AAkEApC,QAAQ6C,0BAAR,GAAqC,UAAUd,WAAV,EAAuBe,UAAvB,EAAmC;AACpE,QAAIC,CAAJ,EAAOC,OAAP;AACA,SAAKD,IAAI,CAAT,EAAYA,IAAID,WAAWjC,MAA3B,EAAmCkC,GAAnC,EAAwC;AACpCC,kBAAUF,WAAWC,CAAX,CAAV;AACA,YAAIE,OAAOD,QAAQE,KAAR,EAAX;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIF,KAAKpC,MAAzB,EAAiCsC,GAAjC,EAAsC;AAClC,gBAAIF,KAAKE,CAAL,MAAY,WAAZ,IAA2BA,MAAMF,KAAKpC,MAAL,GAAc,CAAnD,EAAsD,CAErD,CAFD,MAGK,IAAI,CAACb,QAAQW,UAAR,CAAmBsC,KAAKE,CAAL,CAAnB,CAAL,EAAkC;AACnC,sBAAM,IAAIhB,KAAJ,CAAUJ,cACZ,2BADY,GAEZkB,KAAKE,CAAL,CAFY,GAGZ,YAHY,GAIZH,QAAQX,QAAR,EAJY,GAKZ,mCALY,GAMZ,oDANE,CAAN;AAOH;AACJ;AACJ;;AAIDS,eAAWM,IAAX,CAAgBlD,OAAO+B,IAAP,CAAYoB,YAA5B;AACA,QAAIC,WAAW,IAAf;AACA,SAAKP,IAAI,CAAT,EAAYA,IAAID,WAAWjC,MAA3B,EAAmCkC,GAAnC,EAAwC;AACpCC,kBAAUF,WAAWC,CAAX,CAAV;AACA,YAAIO,aAAa,IAAb,IAAqBA,SAAShC,QAAT,CAAkB0B,OAAlB,CAAzB,EAAqD;AACjD,kBAAM,IAAIb,KAAJ,CAAUJ,cACZ,kBADY,GAEZuB,SAASjB,QAAT,EAFY,GAGZ,oCAHY,GAIZW,QAAQX,QAAR,EAJE,CAAN;AAKH;AACDiB,mBAAWN,OAAX;AACH;AACJ,CApCD;;AA+CAhD,QAAQuD,4BAAR,GAAuC,UAAU/B,MAAV,EAAkBC,cAAlB,EAAkCC,IAAlC,EAAwCC,IAAxC,EAA8CC,QAA9C,EAAwD;AAC3F,QAAIA,YAAYF,SAASG,SAAzB,EACI;AACJ,QAAIE,cAAczB,OAAOyB,WAAP,CAAmBP,MAAnB,EAA2BC,cAA3B,EAA2CG,QAA3C,CAAlB;AACA,QAAI,EAAEF,QAAQ,OAAOA,IAAP,KAAgB,QAA1B,KAAuC8B,MAAMC,OAAN,CAAc/B,IAAd,CAA3C,EAAgE;AAC5D,cAAM,IAAIS,KAAJ,CAAUJ,cAAc,wDAAxB,CAAN;AACH;AACD,QAAIe,aAAa,EAAjB;AACA1C,WAAOsC,OAAP,CAAehB,IAAf,EAAqB,UAAUd,GAAV,EAAeX,KAAf,EAAsB;AACvC,YAAI+C,UAAU,IAAI9C,OAAO+B,IAAX,CAAgBrB,GAAhB,CAAd;AACAZ,gBAAQ8B,oBAAR,CAA6BC,WAA7B,EAA0C9B,KAA1C,EAAiD0B,KAAK+B,KAAL,CAAWV,OAAX,CAAjD;AACA,YAAIA,QAAQW,OAAR,OAAsB,WAA1B,EAAuC;AACnC,gBAAI,CAAC3D,QAAQmB,eAAR,CAAwBlB,KAAxB,CAAL,EAAqC;AACjC,sBAAM,IAAIkC,KAAJ,CAAUJ,cACZ,iCADY,GAEZiB,QAAQX,QAAR,EAFY,GAGZ,2BAHY,GAIZ,qEAJE,CAAN;AAKH;AACJ;AACDS,mBAAWH,IAAX,CAAgBK,OAAhB;AACH,KAbD;AAcAhD,YAAQ6C,0BAAR,CAAmCd,WAAnC,EAAgDe,UAAhD;AACH,CAvBD;AAwBA9C,QAAQ4D,gBAAR,GAA2B,UAAUpC,MAAV,EAAkBC,cAAlB,EAAkCL,QAAlC,EAA4CQ,QAA5C,EAAsD;AAC7E,QAAIA,YAAYR,aAAaS,SAA7B,EACI;AACJ,QAAIxB,OAAOgB,mBAAP,CAA2BD,QAA3B,CAAJ,EACI,MAAM,IAAIe,KAAJ,CAAU7B,OAAOyB,WAAP,CAAmBP,MAAnB,EAA2BC,cAA3B,EAA2CG,QAA3C,IACZ,KADY,GAEZR,SAASiB,QAAT,EAFY,GAGZ,oEAHY,GAIZ,yBAJE,CAAN;;AAMJ,QAAI,CAACrC,QAAQmB,eAAR,CAAwBC,QAAxB,CAAL,EACI,MAAM,IAAIe,KAAJ,CAAU7B,OAAOyB,WAAP,CAAmBP,MAAnB,EAA2BC,cAA3B,EAA2CG,QAA3C,IACZ,oCADY,GAEZ,mDAFE,CAAN;AAGP,CAdD;AAeA5B,QAAQ6D,iBAAR,GAA4B,UAAUrC,MAAV,EAAkBC,cAAlB,EAAkCqC,SAAlC,EAA6ClC,QAA7C,EAAuD;AAC/E,QAAIA,YAAYkC,cAAcjC,SAA9B,EACI;AACJ,YAAQiC,SAAR;AACI,aAAK,OAAL;AACA,aAAK,aAAL;AACA,aAAK,eAAL;AACA,aAAK,eAAL;AACA,aAAK,aAAL;AACI;AACJ;AACI,kBAAM,IAAI3B,KAAJ,CAAU7B,OAAOyB,WAAP,CAAmBP,MAAnB,EAA2BC,cAA3B,EAA2CG,QAA3C,IACZ,wEADY,GAEZ,oCAFE,CAAN;AARR;AAYH,CAfD;AAgBA5B,QAAQ+D,WAAR,GAAsB,UAAUvC,MAAV,EAAkBC,cAAlB,EAAkCb,GAAlC,EAAuCgB,QAAvC,EAAiD;AACnE,QAAIA,YAAYhB,QAAQiB,SAAxB,EACI;AACJ,QAAI,CAAC7B,QAAQW,UAAR,CAAmBC,GAAnB,CAAL,EACI,MAAM,IAAIuB,KAAJ,CAAU7B,OAAOyB,WAAP,CAAmBP,MAAnB,EAA2BC,cAA3B,EAA2CG,QAA3C,IACZ,wBADY,GAEZhB,GAFY,GAGZ,kDAHY,GAIZ,kDAJE,CAAN;AAKP,CATD;AAUAZ,QAAQgE,kBAAR,GAA6B,UAAUxC,MAAV,EAAkBC,cAAlB,EAAkCT,UAAlC,EAA8CY,QAA9C,EAAwD;AACjF,QAAIA,YAAYZ,eAAea,SAA/B,EACI;AACJ,QAAI,CAAC7B,QAAQe,iBAAR,CAA0BC,UAA1B,CAAL,EACI,MAAM,IAAImB,KAAJ,CAAU7B,OAAOyB,WAAP,CAAmBP,MAAnB,EAA2BC,cAA3B,EAA2CG,QAA3C,IACZ,yBADY,GAEZZ,UAFY,GAGZ,yCAHY,GAIZ,2CAJE,CAAN;AAKP,CATD;AAUAhB,QAAQiE,sBAAR,GAAiC,UAAUzC,MAAV,EAAkBC,cAAlB,EAAkCT,UAAlC,EAA8CY,QAA9C,EAAwD;AACrF,QAAIZ,UAAJ,EAAgB;AAEZA,qBAAaA,WAAWE,OAAX,CAAmB,kBAAnB,EAAuC,GAAvC,CAAb;AACH;AACDlB,YAAQgE,kBAAR,CAA2BxC,MAA3B,EAAmCC,cAAnC,EAAmDT,UAAnD,EAA+DY,QAA/D;AACH,CAND;AAOA5B,QAAQkE,oBAAR,GAA+B,UAAU1C,MAAV,EAAkBG,IAAlB,EAAwB;AACnD,QAAIA,KAAKwC,QAAL,OAAoB,OAAxB,EAAiC;AAC7B,cAAM,IAAIhC,KAAJ,CAAUX,SAAS,2CAAnB,CAAN;AACH;AACJ,CAJD;AAKAxB,QAAQoE,WAAR,GAAsB,UAAU5C,MAAV,EAAkBC,cAAlB,EAAkC4C,SAAlC,EAA6C;AAE/D,QAAIrD,aAAaqD,UAAU1C,IAAV,CAAeU,QAAf,EAAjB;AACA,QAAI,EAAE,OAAOgC,UAAUC,QAAV,CAAmBC,IAA1B,KAAmC,QAArC,KACAF,UAAUC,QAAV,CAAmBC,IAAnB,CAAwB1D,MAAxB,KAAmC,CADnC,IAEA,CAACb,QAAQW,UAAR,CAAmB0D,UAAUC,QAAV,CAAmBE,SAAtC,CAFD,IAGCxD,WAAWH,MAAX,KAAsB,CAAtB,IAA2B,CAACb,QAAQiB,qBAAR,CAA8BD,UAA9B,CAHjC,EAG6E;AACzE,cAAM,IAAImB,KAAJ,CAAU7B,OAAOyB,WAAP,CAAmBP,MAAnB,EAA2BC,cAA3B,EAA2C,KAA3C,IACZ,mCADY,GAEZ,qDAFE,CAAN;AAGH;AACJ,CAXD;AAYAzB,QAAQyE,kBAAR,GAA6B,UAAUjD,MAAV,EAAkBC,cAAlB,EAAkCiD,IAAlC,EAAwC9C,QAAxC,EAAkD;AAC3E,QAAIA,YAAY8C,SAAS7C,SAAzB,EACI;AACJ,QAAI,EAAE,OAAO6C,IAAP,KAAgB,QAAlB,CAAJ,EACI,MAAM,IAAIvC,KAAJ,CAAU7B,OAAOyB,WAAP,CAAmBP,MAAnB,EAA2BC,cAA3B,EAA2CG,QAA3C,IACZ,wCADE,CAAN;AAEP,CAND;AAOA5B,QAAQ2E,eAAR,GAA0B,UAAUnD,MAAV,EAAkBC,cAAlB,EAAkCmD,IAAlC,EAAwChD,QAAxC,EAAkD;AACxE,QAAIA,YAAYgD,SAAS/C,SAAzB,EACI;AACJ,QAAI,OAAO+C,IAAP,KAAgB,SAApB,EACI,MAAM,IAAIzC,KAAJ,CAAU7B,OAAOyB,WAAP,CAAmBP,MAAnB,EAA2BC,cAA3B,EAA2CG,QAA3C,IAAuD,oBAAjE,CAAN;AACP,CALD;AAMA5B,QAAQ6E,cAAR,GAAyB,UAAUrD,MAAV,EAAkBC,cAAlB,EAAkCqD,MAAlC,EAA0ClD,QAA1C,EAAoD;AACzE,QAAIA,YAAYkD,WAAWjD,SAA3B,EACI;AACJ,QAAI,EAAE,OAAOiD,MAAP,KAAkB,QAApB,CAAJ,EAAmC;AAC/B,cAAM,IAAI3C,KAAJ,CAAU7B,OAAOyB,WAAP,CAAmBP,MAAnB,EAA2BC,cAA3B,EAA2CG,QAA3C,IACZ,yBADE,CAAN;AAEH;AACJ,CAPD;AAQA5B,QAAQ+E,cAAR,GAAyB,UAAUvD,MAAV,EAAkBC,cAAlB,EAAkCuD,GAAlC,EAAuCpD,QAAvC,EAAiD;AACtE,QAAIA,YAAYoD,QAAQnD,SAAxB,EACI;AACJ,QAAI,EAAEmD,OAAO,OAAOA,GAAP,KAAe,QAAxB,KAAqCA,QAAQ,IAAjD,EAAuD;AACnD,cAAM,IAAI7C,KAAJ,CAAU7B,OAAOyB,WAAP,CAAmBP,MAAnB,EAA2BC,cAA3B,EAA2CG,QAA3C,IACZ,yBADE,CAAN;AAEH;AACJ,CAPD;AAQA5B,QAAQiF,yBAAR,GAAoC,UAAUzD,MAAV,EAAkBC,cAAlB,EAAkCuD,GAAlC,EAAuCpE,GAAvC,EAA4CgB,QAA5C,EAAsDsD,QAAtD,EAAgE;AAChG,QAAIC,oBAAoBH,OAAO,OAAOA,GAAP,KAAe,QAAtB,IAAkC5E,OAAOkB,QAAP,CAAgB0D,GAAhB,EAAqBpE,GAArB,CAA1D;AACA,QAAI,CAACuE,iBAAL,EAAwB;AACpB,YAAIvD,QAAJ,EAAc;AACV;AACH,SAFD,MAGK;AACD,kBAAM,IAAIO,KAAJ,CAAU7B,OAAOyB,WAAP,CAAmBP,MAAnB,EAA2BC,cAA3B,EAA2CG,QAA3C,IACZ,wBADY,GAEZhB,GAFY,GAGZ,GAHE,CAAN;AAIH;AACJ;AACD,QAAIsE,QAAJ,EAAc;AACV,YAAIE,MAAMhF,OAAOiF,OAAP,CAAeL,GAAf,EAAoBpE,GAApB,CAAV;AACA,YAAKsE,aAAa,QAAb,IAAyB,EAAE,OAAOE,GAAP,KAAe,QAAjB,CAA1B,IACCF,aAAa,QAAb,IAAyB,EAAE,OAAOE,GAAP,KAAe,QAAjB,CAD1B,IAECF,aAAa,SAAb,IAA0B,EAAE,OAAOE,GAAP,KAAe,SAAjB,CAF3B,IAGCF,aAAa,UAAb,IAA2B,EAAE,OAAOE,GAAP,KAAe,UAAjB,CAH5B,IAICF,aAAa,QAAb,IAAyB,EAAE,OAAOE,GAAP,KAAe,QAAjB,CAAzB,IAAuDA,GAJ5D,EAIkE;AAC9D,gBAAIxD,QAAJ,EAAc;AACV,sBAAM,IAAIO,KAAJ,CAAU7B,OAAOyB,WAAP,CAAmBP,MAAnB,EAA2BC,cAA3B,EAA2CG,QAA3C,IACZ,kCADY,GAEZhB,GAFY,GAGZ,sBAHY,GAIZsE,QAJY,GAKZ,IALE,CAAN;AAMH,aAPD,MAQK;AACD,sBAAM,IAAI/C,KAAJ,CAAU7B,OAAOyB,WAAP,CAAmBP,MAAnB,EAA2BC,cAA3B,EAA2CG,QAA3C,IACZ,wBADY,GAEZhB,GAFY,GAGZ,eAHY,GAIZsE,QAJY,GAKZ,GALE,CAAN;AAMH;AACJ;AACJ;AACJ,CAtCD","sourcesContent":["\"use strict\";\n/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Path_1 = require(\"./Path\");\nvar util_1 = require(\"@firebase/util\");\nvar util_2 = require(\"./util\");\nvar util_3 = require(\"@firebase/util\");\nvar util_4 = require(\"@firebase/util\");\n/**\n * True for invalid Firebase keys\n * @type {RegExp}\n * @private\n */\nexports.INVALID_KEY_REGEX_ = /[\\[\\].#$\\/\\u0000-\\u001F\\u007F]/;\n/**\n * True for invalid Firebase paths.\n * Allows '/' in paths.\n * @type {RegExp}\n * @private\n */\nexports.INVALID_PATH_REGEX_ = /[\\[\\].#$\\u0000-\\u001F\\u007F]/;\n/**\n * Maximum number of characters to allow in leaf value\n * @type {number}\n * @private\n */\nexports.MAX_LEAF_SIZE_ = 10 * 1024 * 1024;\n/**\n * @param {*} key\n * @return {boolean}\n */\nexports.isValidKey = function (key) {\n    return (typeof key === 'string' && key.length !== 0 && !exports.INVALID_KEY_REGEX_.test(key));\n};\n/**\n * @param {string} pathString\n * @return {boolean}\n */\nexports.isValidPathString = function (pathString) {\n    return (typeof pathString === 'string' &&\n        pathString.length !== 0 &&\n        !exports.INVALID_PATH_REGEX_.test(pathString));\n};\n/**\n * @param {string} pathString\n * @return {boolean}\n */\nexports.isValidRootPathString = function (pathString) {\n    if (pathString) {\n        // Allow '/.info/' at the beginning.\n        pathString = pathString.replace(/^\\/*\\.info(\\/|$)/, '/');\n    }\n    return exports.isValidPathString(pathString);\n};\n/**\n * @param {*} priority\n * @return {boolean}\n */\nexports.isValidPriority = function (priority) {\n    return (priority === null ||\n        typeof priority === 'string' ||\n        (typeof priority === 'number' && !util_2.isInvalidJSONNumber(priority)) ||\n        (priority && typeof priority === 'object' && util_1.contains(priority, '.sv')));\n};\n/**\n * Pre-validate a datum passed as an argument to Firebase function.\n *\n * @param {string} fnName\n * @param {number} argumentNumber\n * @param {*} data\n * @param {!Path} path\n * @param {boolean} optional\n */\nexports.validateFirebaseDataArg = function (fnName, argumentNumber, data, path, optional) {\n    if (optional && data === undefined)\n        return;\n    exports.validateFirebaseData(util_3.errorPrefix(fnName, argumentNumber, optional), data, path);\n};\n/**\n * Validate a data object client-side before sending to server.\n *\n * @param {string} errorPrefix\n * @param {*} data\n * @param {!Path|!ValidationPath} path_\n */\nexports.validateFirebaseData = function (errorPrefix, data, path_) {\n    var path = path_ instanceof Path_1.Path ? new Path_1.ValidationPath(path_, errorPrefix) : path_;\n    if (data === undefined) {\n        throw new Error(errorPrefix + 'contains undefined ' + path.toErrorString());\n    }\n    if (typeof data === 'function') {\n        throw new Error(errorPrefix +\n            'contains a function ' +\n            path.toErrorString() +\n            ' with contents = ' +\n            data.toString());\n    }\n    if (util_2.isInvalidJSONNumber(data)) {\n        throw new Error(errorPrefix + 'contains ' + data.toString() + ' ' + path.toErrorString());\n    }\n    // Check max leaf size, but try to avoid the utf8 conversion if we can.\n    if (typeof data === 'string' &&\n        data.length > exports.MAX_LEAF_SIZE_ / 3 &&\n        util_4.stringLength(data) > exports.MAX_LEAF_SIZE_) {\n        throw new Error(errorPrefix +\n            'contains a string greater than ' +\n            exports.MAX_LEAF_SIZE_ +\n            ' utf8 bytes ' +\n            path.toErrorString() +\n            \" ('\" +\n            data.substring(0, 50) +\n            \"...')\");\n    }\n    // TODO = Perf = Consider combining the recursive validation of keys into NodeFromJSON\n    // to save extra walking of large objects.\n    if (data && typeof data === 'object') {\n        var hasDotValue_1 = false, hasActualChild_1 = false;\n        util_1.forEach(data, function (key, value) {\n            if (key === '.value') {\n                hasDotValue_1 = true;\n            }\n            else if (key !== '.priority' && key !== '.sv') {\n                hasActualChild_1 = true;\n                if (!exports.isValidKey(key)) {\n                    throw new Error(errorPrefix +\n                        ' contains an invalid key (' +\n                        key +\n                        ') ' +\n                        path.toErrorString() +\n                        '.  Keys must be non-empty strings ' +\n                        'and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"');\n                }\n            }\n            path.push(key);\n            exports.validateFirebaseData(errorPrefix, value, path);\n            path.pop();\n        });\n        if (hasDotValue_1 && hasActualChild_1) {\n            throw new Error(errorPrefix +\n                ' contains \".value\" child ' +\n                path.toErrorString() +\n                ' in addition to actual children.');\n        }\n    }\n};\n/**\n * Pre-validate paths passed in the firebase function.\n *\n * @param {string} errorPrefix\n * @param {Array<!Path>} mergePaths\n */\nexports.validateFirebaseMergePaths = function (errorPrefix, mergePaths) {\n    var i, curPath;\n    for (i = 0; i < mergePaths.length; i++) {\n        curPath = mergePaths[i];\n        var keys = curPath.slice();\n        for (var j = 0; j < keys.length; j++) {\n            if (keys[j] === '.priority' && j === keys.length - 1) {\n                // .priority is OK\n            }\n            else if (!exports.isValidKey(keys[j])) {\n                throw new Error(errorPrefix +\n                    'contains an invalid key (' +\n                    keys[j] +\n                    ') in path ' +\n                    curPath.toString() +\n                    '. Keys must be non-empty strings ' +\n                    'and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"');\n            }\n        }\n    }\n    // Check that update keys are not descendants of each other.\n    // We rely on the property that sorting guarantees that ancestors come\n    // right before descendants.\n    mergePaths.sort(Path_1.Path.comparePaths);\n    var prevPath = null;\n    for (i = 0; i < mergePaths.length; i++) {\n        curPath = mergePaths[i];\n        if (prevPath !== null && prevPath.contains(curPath)) {\n            throw new Error(errorPrefix +\n                'contains a path ' +\n                prevPath.toString() +\n                ' that is ancestor of another path ' +\n                curPath.toString());\n        }\n        prevPath = curPath;\n    }\n};\n/**\n * pre-validate an object passed as an argument to firebase function (\n * must be an object - e.g. for firebase.update()).\n *\n * @param {string} fnName\n * @param {number} argumentNumber\n * @param {*} data\n * @param {!Path} path\n * @param {boolean} optional\n */\nexports.validateFirebaseMergeDataArg = function (fnName, argumentNumber, data, path, optional) {\n    if (optional && data === undefined)\n        return;\n    var errorPrefix = util_3.errorPrefix(fnName, argumentNumber, optional);\n    if (!(data && typeof data === 'object') || Array.isArray(data)) {\n        throw new Error(errorPrefix + ' must be an object containing the children to replace.');\n    }\n    var mergePaths = [];\n    util_1.forEach(data, function (key, value) {\n        var curPath = new Path_1.Path(key);\n        exports.validateFirebaseData(errorPrefix, value, path.child(curPath));\n        if (curPath.getBack() === '.priority') {\n            if (!exports.isValidPriority(value)) {\n                throw new Error(errorPrefix +\n                    \"contains an invalid value for '\" +\n                    curPath.toString() +\n                    \"', which must be a valid \" +\n                    'Firebase priority (a string, finite number, server value, or null).');\n            }\n        }\n        mergePaths.push(curPath);\n    });\n    exports.validateFirebaseMergePaths(errorPrefix, mergePaths);\n};\nexports.validatePriority = function (fnName, argumentNumber, priority, optional) {\n    if (optional && priority === undefined)\n        return;\n    if (util_2.isInvalidJSONNumber(priority))\n        throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) +\n            'is ' +\n            priority.toString() +\n            ', but must be a valid Firebase priority (a string, finite number, ' +\n            'server value, or null).');\n    // Special case to allow importing data with a .sv.\n    if (!exports.isValidPriority(priority))\n        throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) +\n            'must be a valid Firebase priority ' +\n            '(a string, finite number, server value, or null).');\n};\nexports.validateEventType = function (fnName, argumentNumber, eventType, optional) {\n    if (optional && eventType === undefined)\n        return;\n    switch (eventType) {\n        case 'value':\n        case 'child_added':\n        case 'child_removed':\n        case 'child_changed':\n        case 'child_moved':\n            break;\n        default:\n            throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) +\n                'must be a valid event type = \"value\", \"child_added\", \"child_removed\", ' +\n                '\"child_changed\", or \"child_moved\".');\n    }\n};\nexports.validateKey = function (fnName, argumentNumber, key, optional) {\n    if (optional && key === undefined)\n        return;\n    if (!exports.isValidKey(key))\n        throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) +\n            'was an invalid key = \"' +\n            key +\n            '\".  Firebase keys must be non-empty strings and ' +\n            'can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\").');\n};\nexports.validatePathString = function (fnName, argumentNumber, pathString, optional) {\n    if (optional && pathString === undefined)\n        return;\n    if (!exports.isValidPathString(pathString))\n        throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) +\n            'was an invalid path = \"' +\n            pathString +\n            '\". Paths must be non-empty strings and ' +\n            'can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\"');\n};\nexports.validateRootPathString = function (fnName, argumentNumber, pathString, optional) {\n    if (pathString) {\n        // Allow '/.info/' at the beginning.\n        pathString = pathString.replace(/^\\/*\\.info(\\/|$)/, '/');\n    }\n    exports.validatePathString(fnName, argumentNumber, pathString, optional);\n};\nexports.validateWritablePath = function (fnName, path) {\n    if (path.getFront() === '.info') {\n        throw new Error(fnName + \" failed = Can't modify data under /.info/\");\n    }\n};\nexports.validateUrl = function (fnName, argumentNumber, parsedUrl) {\n    // TODO = Validate server better.\n    var pathString = parsedUrl.path.toString();\n    if (!(typeof parsedUrl.repoInfo.host === 'string') ||\n        parsedUrl.repoInfo.host.length === 0 ||\n        !exports.isValidKey(parsedUrl.repoInfo.namespace) ||\n        (pathString.length !== 0 && !exports.isValidRootPathString(pathString))) {\n        throw new Error(util_3.errorPrefix(fnName, argumentNumber, false) +\n            'must be a valid firebase URL and ' +\n            'the path can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\".');\n    }\n};\nexports.validateCredential = function (fnName, argumentNumber, cred, optional) {\n    if (optional && cred === undefined)\n        return;\n    if (!(typeof cred === 'string'))\n        throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) +\n            'must be a valid credential (a string).');\n};\nexports.validateBoolean = function (fnName, argumentNumber, bool, optional) {\n    if (optional && bool === undefined)\n        return;\n    if (typeof bool !== 'boolean')\n        throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) + 'must be a boolean.');\n};\nexports.validateString = function (fnName, argumentNumber, string, optional) {\n    if (optional && string === undefined)\n        return;\n    if (!(typeof string === 'string')) {\n        throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) +\n            'must be a valid string.');\n    }\n};\nexports.validateObject = function (fnName, argumentNumber, obj, optional) {\n    if (optional && obj === undefined)\n        return;\n    if (!(obj && typeof obj === 'object') || obj === null) {\n        throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) +\n            'must be a valid object.');\n    }\n};\nexports.validateObjectContainsKey = function (fnName, argumentNumber, obj, key, optional, opt_type) {\n    var objectContainsKey = obj && typeof obj === 'object' && util_1.contains(obj, key);\n    if (!objectContainsKey) {\n        if (optional) {\n            return;\n        }\n        else {\n            throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) +\n                'must contain the key \"' +\n                key +\n                '\"');\n        }\n    }\n    if (opt_type) {\n        var val = util_1.safeGet(obj, key);\n        if ((opt_type === 'number' && !(typeof val === 'number')) ||\n            (opt_type === 'string' && !(typeof val === 'string')) ||\n            (opt_type === 'boolean' && !(typeof val === 'boolean')) ||\n            (opt_type === 'function' && !(typeof val === 'function')) ||\n            (opt_type === 'object' && !(typeof val === 'object') && val)) {\n            if (optional) {\n                throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) +\n                    'contains invalid value for key \"' +\n                    key +\n                    '\" (must be of type \"' +\n                    opt_type +\n                    '\")');\n            }\n            else {\n                throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) +\n                    'must contain the key \"' +\n                    key +\n                    '\" with type \"' +\n                    opt_type +\n                    '\"');\n            }\n        }\n    }\n};\n\n//# sourceMappingURL=validation.js.map\n"]}]