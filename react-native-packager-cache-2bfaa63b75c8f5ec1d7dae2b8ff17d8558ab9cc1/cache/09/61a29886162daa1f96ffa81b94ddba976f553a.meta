["12eb991586796a7d84d2fd19e0321ba756228ae7","803b030095f390e15e8b1d16e665b08f8572bc62",["./CacheNode"],[104],{"version":3,"sources":["/home/giise/candidtwo/node_modules/@firebase/database/dist/cjs/src/core/view/CompleteChildSource.js"],"names":["Object","defineProperty","exports","value","CacheNode_1","require","NoCompleteChildSource_","prototype","getCompleteChild","childKey","getChildAfterChild","index","child","reverse","NO_COMPLETE_CHILD_SOURCE","WriteTreeCompleteChildSource","writes_","viewCache_","optCompleteServerCache_","node","getEventCache","isCompleteForChild","getNode","getImmediateChild","serverNode","CacheNode","getServerCache","calcCompleteChild","completeServerData","getCompleteServerSnap","nodes","calcIndexedSlice","length"],"mappings":"AAAA;;AAgBAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C,EAAEC,OAAO,IAAT,EAA7C;AACA,IAAIC,cAAcC,QAAQ,aAAR,CAAlB;;AAQA,IAAIC,yBAAwC,YAAY;AACpD,aAASA,sBAAT,GAAkC,CACjC;;AAIDA,2BAAuBC,SAAvB,CAAiCC,gBAAjC,GAAoD,UAAUC,QAAV,EAAoB;AACpE,eAAO,IAAP;AACH,KAFD;;AAMAH,2BAAuBC,SAAvB,CAAiCG,kBAAjC,GAAsD,UAAUC,KAAV,EAAiBC,KAAjB,EAAwBC,OAAxB,EAAiC;AACnF,eAAO,IAAP;AACH,KAFD;AAGA,WAAOP,sBAAP;AACH,CAhB2C,EAA5C;AAiBAJ,QAAQI,sBAAR,GAAiCA,sBAAjC;;AAMAJ,QAAQY,wBAAR,GAAmC,IAAIR,sBAAJ,EAAnC;;AAQA,IAAIS,+BAA8C,YAAY;AAM1D,aAASA,4BAAT,CAAsCC,OAAtC,EAA+CC,UAA/C,EAA2DC,uBAA3D,EAAoF;AAChF,YAAIA,4BAA4B,KAAK,CAArC,EAAwC;AAAEA,sCAA0B,IAA1B;AAAiC;AAC3E,aAAKF,OAAL,GAAeA,OAAf;AACA,aAAKC,UAAL,GAAkBA,UAAlB;AACA,aAAKC,uBAAL,GAA+BA,uBAA/B;AACH;;AAIDH,iCAA6BR,SAA7B,CAAuCC,gBAAvC,GAA0D,UAAUC,QAAV,EAAoB;AAC1E,YAAIU,OAAO,KAAKF,UAAL,CAAgBG,aAAhB,EAAX;AACA,YAAID,KAAKE,kBAAL,CAAwBZ,QAAxB,CAAJ,EAAuC;AACnC,mBAAOU,KAAKG,OAAL,GAAeC,iBAAf,CAAiCd,QAAjC,CAAP;AACH,SAFD,MAGK;AACD,gBAAIe,aAAa,KAAKN,uBAAL,IAAgC,IAAhC,GACX,IAAId,YAAYqB,SAAhB,CAA0B,KAAKP,uBAA/B,EAAwD,IAAxD,EAA8D,KAA9D,CADW,GAEX,KAAKD,UAAL,CAAgBS,cAAhB,EAFN;AAGA,mBAAO,KAAKV,OAAL,CAAaW,iBAAb,CAA+BlB,QAA/B,EAAyCe,UAAzC,CAAP;AACH;AACJ,KAXD;;AAeAT,iCAA6BR,SAA7B,CAAuCG,kBAAvC,GAA4D,UAAUC,KAAV,EAAiBC,KAAjB,EAAwBC,OAAxB,EAAiC;AACzF,YAAIe,qBAAqB,KAAKV,uBAAL,IAAgC,IAAhC,GACnB,KAAKA,uBADc,GAEnB,KAAKD,UAAL,CAAgBY,qBAAhB,EAFN;AAGA,YAAIC,QAAQ,KAAKd,OAAL,CAAae,gBAAb,CAA8BH,kBAA9B,EAAkDhB,KAAlD,EAAyD,CAAzD,EAA4DC,OAA5D,EAAqEF,KAArE,CAAZ;AACA,YAAImB,MAAME,MAAN,KAAiB,CAArB,EAAwB;AACpB,mBAAO,IAAP;AACH,SAFD,MAGK;AACD,mBAAOF,MAAM,CAAN,CAAP;AACH;AACJ,KAXD;AAYA,WAAOf,4BAAP;AACH,CA3CiD,EAAlD;AA4CAb,QAAQa,4BAAR,GAAuCA,4BAAvC","sourcesContent":["\"use strict\";\n/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CacheNode_1 = require(\"./CacheNode\");\n/**\n * An implementation of CompleteChildSource that never returns any additional children\n *\n * @private\n * @constructor\n * @implements CompleteChildSource\n */\nvar NoCompleteChildSource_ = /** @class */ (function () {\n    function NoCompleteChildSource_() {\n    }\n    /**\n     * @inheritDoc\n     */\n    NoCompleteChildSource_.prototype.getCompleteChild = function (childKey) {\n        return null;\n    };\n    /**\n     * @inheritDoc\n     */\n    NoCompleteChildSource_.prototype.getChildAfterChild = function (index, child, reverse) {\n        return null;\n    };\n    return NoCompleteChildSource_;\n}());\nexports.NoCompleteChildSource_ = NoCompleteChildSource_;\n/**\n * Singleton instance.\n * @const\n * @type {!CompleteChildSource}\n */\nexports.NO_COMPLETE_CHILD_SOURCE = new NoCompleteChildSource_();\n/**\n * An implementation of CompleteChildSource that uses a WriteTree in addition to any other server data or\n * old event caches available to calculate complete children.\n *\n *\n * @implements CompleteChildSource\n */\nvar WriteTreeCompleteChildSource = /** @class */ (function () {\n    /**\n     * @param {!WriteTreeRef} writes_\n     * @param {!ViewCache} viewCache_\n     * @param {?Node} optCompleteServerCache_\n     */\n    function WriteTreeCompleteChildSource(writes_, viewCache_, optCompleteServerCache_) {\n        if (optCompleteServerCache_ === void 0) { optCompleteServerCache_ = null; }\n        this.writes_ = writes_;\n        this.viewCache_ = viewCache_;\n        this.optCompleteServerCache_ = optCompleteServerCache_;\n    }\n    /**\n     * @inheritDoc\n     */\n    WriteTreeCompleteChildSource.prototype.getCompleteChild = function (childKey) {\n        var node = this.viewCache_.getEventCache();\n        if (node.isCompleteForChild(childKey)) {\n            return node.getNode().getImmediateChild(childKey);\n        }\n        else {\n            var serverNode = this.optCompleteServerCache_ != null\n                ? new CacheNode_1.CacheNode(this.optCompleteServerCache_, true, false)\n                : this.viewCache_.getServerCache();\n            return this.writes_.calcCompleteChild(childKey, serverNode);\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    WriteTreeCompleteChildSource.prototype.getChildAfterChild = function (index, child, reverse) {\n        var completeServerData = this.optCompleteServerCache_ != null\n            ? this.optCompleteServerCache_\n            : this.viewCache_.getCompleteServerSnap();\n        var nodes = this.writes_.calcIndexedSlice(completeServerData, child, 1, reverse, index);\n        if (nodes.length === 0) {\n            return null;\n        }\n        else {\n            return nodes[0];\n        }\n    };\n    return WriteTreeCompleteChildSource;\n}());\nexports.WriteTreeCompleteChildSource = WriteTreeCompleteChildSource;\n\n//# sourceMappingURL=CompleteChildSource.js.map\n"]}]