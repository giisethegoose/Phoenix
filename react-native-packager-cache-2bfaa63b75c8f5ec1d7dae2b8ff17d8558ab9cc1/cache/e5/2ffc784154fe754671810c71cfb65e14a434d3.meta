["7d304ee4247f545708e3fa2dee0289c77ef54f47","9f211abbe5b3bcf56fc8fb28cd2f7fe3ee1d2096",["./error"],[107],{"version":3,"sources":["/home/giise/candidtwo/node_modules/@firebase/storage/dist/cjs/src/implementation/location.js"],"names":["Object","defineProperty","exports","value","errorsExports","require","Location","bucket","path","path_","prototype","get","enumerable","configurable","fullServerUrl","encode","encodeURIComponent","bucketOnlyServerUrl","makeFromBucketSpec","bucketString","bucketLocation","makeFromUrl","e","invalidDefaultBucket","url","location","bucketDomain","gsModify","loc","charAt","length","slice","gsPath","gsRegex","RegExp","gsIndices","httpModify","decodeURIComponent","version","httpRegex","httpIndices","groups","regex","indices","postModify","i","group","captures","exec","bucketValue","pathValue","invalidUrl"],"mappings":"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","sourcesContent":["\"use strict\";\n/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * @fileoverview Functionality related to the parsing/composition of bucket/\n * object location.\n */\nvar errorsExports = require(\"./error\");\n/**\n * @struct\n */\nvar Location = /** @class */ (function () {\n    function Location(bucket, path) {\n        this.bucket = bucket;\n        this.path_ = path;\n    }\n    Object.defineProperty(Location.prototype, \"path\", {\n        get: function () {\n            return this.path_;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Location.prototype.fullServerUrl = function () {\n        var encode = encodeURIComponent;\n        return '/b/' + encode(this.bucket) + '/o/' + encode(this.path);\n    };\n    Location.prototype.bucketOnlyServerUrl = function () {\n        var encode = encodeURIComponent;\n        return '/b/' + encode(this.bucket) + '/o';\n    };\n    Location.makeFromBucketSpec = function (bucketString) {\n        var bucketLocation;\n        try {\n            bucketLocation = Location.makeFromUrl(bucketString);\n        }\n        catch (e) {\n            // Not valid URL, use as-is. This lets you put bare bucket names in\n            // config.\n            return new Location(bucketString, '');\n        }\n        if (bucketLocation.path === '') {\n            return bucketLocation;\n        }\n        else {\n            throw errorsExports.invalidDefaultBucket(bucketString);\n        }\n    };\n    Location.makeFromUrl = function (url) {\n        var location = null;\n        var bucketDomain = '([A-Za-z0-9.\\\\-]+)';\n        function gsModify(loc) {\n            if (loc.path.charAt(loc.path.length - 1) === '/') {\n                loc.path_ = loc.path_.slice(0, -1);\n            }\n        }\n        var gsPath = '(/(.*))?$';\n        var path = '(/([^?#]*).*)?$';\n        var gsRegex = new RegExp('^gs://' + bucketDomain + gsPath, 'i');\n        var gsIndices = { bucket: 1, path: 3 };\n        function httpModify(loc) {\n            loc.path_ = decodeURIComponent(loc.path);\n        }\n        var version = 'v[A-Za-z0-9_]+';\n        var httpRegex = new RegExp('^https?://firebasestorage\\\\.googleapis\\\\.com/' +\n            version +\n            '/b/' +\n            bucketDomain +\n            '/o' +\n            path, 'i');\n        var httpIndices = { bucket: 1, path: 3 };\n        var groups = [\n            { regex: gsRegex, indices: gsIndices, postModify: gsModify },\n            { regex: httpRegex, indices: httpIndices, postModify: httpModify }\n        ];\n        for (var i = 0; i < groups.length; i++) {\n            var group = groups[i];\n            var captures = group.regex.exec(url);\n            if (captures) {\n                var bucketValue = captures[group.indices.bucket];\n                var pathValue = captures[group.indices.path];\n                if (!pathValue) {\n                    pathValue = '';\n                }\n                location = new Location(bucketValue, pathValue);\n                group.postModify(location);\n                break;\n            }\n        }\n        if (location == null) {\n            throw errorsExports.invalidUrl(url);\n        }\n        return location;\n    };\n    return Location;\n}());\nexports.Location = Location;\n\n//# sourceMappingURL=location.js.map\n"]}]