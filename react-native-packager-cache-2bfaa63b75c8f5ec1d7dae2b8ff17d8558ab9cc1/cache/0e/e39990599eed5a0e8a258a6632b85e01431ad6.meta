["ad425420fe85fe27c86fc6a91b51fb47c4d24a9c","efe80acbbab3b44dc8db87f79f726dcd6933c711",["./implementation/args","./implementation/authwrapper","./implementation/location","./implementation/promise_external","./implementation/request","./reference"],[97,151,209,268,335,390],{"version":3,"sources":["/home/giise/candidtwo/node_modules/@firebase/storage/dist/cjs/src/service.js"],"names":["Object","defineProperty","exports","value","args","require","authwrapper_1","location_1","fbsPromiseImpl","RequestExports","reference_1","Service","app","pool","url","bucket_","maker","authWrapper","loc","Reference","authWrapper_","AuthWrapper","makeRequest","app_","Location","makeFromBucketSpec","authWrapperBucket","bucket","internals_","ServiceInternals","prototype","ref","path","validator","test","validate","stringSpec","arguments","Error","child","refFromURL","p","makeFromUrl","e","get","maxUploadRetryTime","enumerable","configurable","setMaxUploadRetryTime","time","nonNegativeNumberSpec","maxOperationRetryTime","setMaxOperationRetryTime","service","service_","delete","deleteApp","resolve","undefined"],"mappings":"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","sourcesContent":["\"use strict\";\n/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar args = require(\"./implementation/args\");\nvar authwrapper_1 = require(\"./implementation/authwrapper\");\nvar location_1 = require(\"./implementation/location\");\nvar fbsPromiseImpl = require(\"./implementation/promise_external\");\nvar RequestExports = require(\"./implementation/request\");\nvar reference_1 = require(\"./reference\");\n/**\n * A service that provides firebaseStorage.Reference instances.\n * @param opt_url gs:// url to a custom Storage Bucket\n *\n * @struct\n */\nvar Service = /** @class */ (function () {\n    function Service(app, pool, url) {\n        this.bucket_ = null;\n        function maker(authWrapper, loc) {\n            return new reference_1.Reference(authWrapper, loc);\n        }\n        this.authWrapper_ = new authwrapper_1.AuthWrapper(app, maker, RequestExports.makeRequest, this, pool);\n        this.app_ = app;\n        if (url != null) {\n            this.bucket_ = location_1.Location.makeFromBucketSpec(url);\n        }\n        else {\n            var authWrapperBucket = this.authWrapper_.bucket();\n            if (authWrapperBucket != null) {\n                this.bucket_ = new location_1.Location(authWrapperBucket, '');\n            }\n        }\n        this.internals_ = new ServiceInternals(this);\n    }\n    /**\n     * Returns a firebaseStorage.Reference for the given path in the default\n     * bucket.\n     */\n    Service.prototype.ref = function (path) {\n        function validator(path) {\n            if (/^[A-Za-z]+:\\/\\//.test(path)) {\n                throw 'Expected child path but got a URL, use refFromURL instead.';\n            }\n        }\n        args.validate('ref', [args.stringSpec(validator, true)], arguments);\n        if (this.bucket_ == null) {\n            throw new Error('No Storage Bucket defined in Firebase Options.');\n        }\n        var ref = new reference_1.Reference(this.authWrapper_, this.bucket_);\n        if (path != null) {\n            return ref.child(path);\n        }\n        else {\n            return ref;\n        }\n    };\n    /**\n     * Returns a firebaseStorage.Reference object for the given absolute URL,\n     * which must be a gs:// or http[s]:// URL.\n     */\n    Service.prototype.refFromURL = function (url) {\n        function validator(p) {\n            if (!/^[A-Za-z]+:\\/\\//.test(p)) {\n                throw 'Expected full URL but got a child path, use ref instead.';\n            }\n            try {\n                location_1.Location.makeFromUrl(p);\n            }\n            catch (e) {\n                throw 'Expected valid full URL but got an invalid one.';\n            }\n        }\n        args.validate('refFromURL', [args.stringSpec(validator, false)], arguments);\n        return new reference_1.Reference(this.authWrapper_, url);\n    };\n    Object.defineProperty(Service.prototype, \"maxUploadRetryTime\", {\n        get: function () {\n            return this.authWrapper_.maxUploadRetryTime();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Service.prototype.setMaxUploadRetryTime = function (time) {\n        args.validate('setMaxUploadRetryTime', [args.nonNegativeNumberSpec()], arguments);\n        this.authWrapper_.setMaxUploadRetryTime(time);\n    };\n    Object.defineProperty(Service.prototype, \"maxOperationRetryTime\", {\n        get: function () {\n            return this.authWrapper_.maxOperationRetryTime();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Service.prototype.setMaxOperationRetryTime = function (time) {\n        args.validate('setMaxOperationRetryTime', [args.nonNegativeNumberSpec()], arguments);\n        this.authWrapper_.setMaxOperationRetryTime(time);\n    };\n    Object.defineProperty(Service.prototype, \"app\", {\n        get: function () {\n            return this.app_;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Service.prototype, \"INTERNAL\", {\n        get: function () {\n            return this.internals_;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Service;\n}());\nexports.Service = Service;\n/**\n * @struct\n */\nvar ServiceInternals = /** @class */ (function () {\n    function ServiceInternals(service) {\n        this.service_ = service;\n    }\n    /**\n     * Called when the associated app is deleted.\n     * @see {!fbs.AuthWrapper.prototype.deleteApp}\n     */\n    ServiceInternals.prototype.delete = function () {\n        this.service_.authWrapper_.deleteApp();\n        return fbsPromiseImpl.resolve(undefined);\n    };\n    return ServiceInternals;\n}());\nexports.ServiceInternals = ServiceInternals;\n\n//# sourceMappingURL=service.js.map\n"]}]