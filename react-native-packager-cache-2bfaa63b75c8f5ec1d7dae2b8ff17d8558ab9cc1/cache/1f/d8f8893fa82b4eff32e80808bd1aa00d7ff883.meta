["86371005e7a1f28cc021b2451b69606a4bab34ff","2226a7542c2c6faa2ff28d741eaeee61e77d4550",["./error"],[107],{"version":3,"sources":["/home/giise/candidtwo/node_modules/@firebase/storage/dist/cjs/src/implementation/string.js"],"names":["Object","defineProperty","exports","value","errorsExports","require","StringFormat","RAW","BASE64","BASE64URL","DATA_URL","formatValidator","stringFormat","StringData","data","opt_contentType","contentType","dataFromString","format","string","utf8Bytes_","base64Bytes_","dataURLBytes_","dataURLContentType_","unknown","b","i","length","c","charCodeAt","push","valid","hi","lo","Uint8Array","percentEncodedBytes_","decoded","decodeURIComponent","e","invalidFormat","hasMinus","indexOf","hasUnder","invalidChar","hasPlus","hasSlash","replace","bytes","atob","array","DataURLParts","dataURL","base64","matches","match","middle","endsWith","substring","rest","parts","s","end","longEnough"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar errorsExports = require(\"./error\");\nexports.StringFormat = {\n    RAW: 'raw',\n    BASE64: 'base64',\n    BASE64URL: 'base64url',\n    DATA_URL: 'data_url'\n};\nfunction formatValidator(stringFormat) {\n    switch (stringFormat) {\n        case exports.StringFormat.RAW:\n        case exports.StringFormat.BASE64:\n        case exports.StringFormat.BASE64URL:\n        case exports.StringFormat.DATA_URL:\n            return;\n        default:\n            throw 'Expected one of the event types: [' +\n                exports.StringFormat.RAW +\n                ', ' +\n                exports.StringFormat.BASE64 +\n                ', ' +\n                exports.StringFormat.BASE64URL +\n                ', ' +\n                exports.StringFormat.DATA_URL +\n                '].';\n    }\n}\nexports.formatValidator = formatValidator;\n/**\n * @struct\n */\nvar StringData = /** @class */ (function () {\n    function StringData(data, opt_contentType) {\n        this.data = data;\n        this.contentType = opt_contentType || null;\n    }\n    return StringData;\n}());\nexports.StringData = StringData;\nfunction dataFromString(format, string) {\n    switch (format) {\n        case exports.StringFormat.RAW:\n            return new StringData(utf8Bytes_(string));\n        case exports.StringFormat.BASE64:\n        case exports.StringFormat.BASE64URL:\n            return new StringData(base64Bytes_(format, string));\n        case exports.StringFormat.DATA_URL:\n            return new StringData(dataURLBytes_(string), dataURLContentType_(string));\n    }\n    // assert(false);\n    throw errorsExports.unknown();\n}\nexports.dataFromString = dataFromString;\nfunction utf8Bytes_(string) {\n    var b = [];\n    for (var i = 0; i < string.length; i++) {\n        var c = string.charCodeAt(i);\n        if (c <= 127) {\n            b.push(c);\n        }\n        else {\n            if (c <= 2047) {\n                b.push(192 | (c >> 6), 128 | (c & 63));\n            }\n            else {\n                if ((c & 64512) == 55296) {\n                    // The start of a surrogate pair.\n                    var valid = i < string.length - 1 &&\n                        (string.charCodeAt(i + 1) & 64512) == 56320;\n                    if (!valid) {\n                        // The second surrogate wasn't there.\n                        b.push(239, 191, 189);\n                    }\n                    else {\n                        var hi = c;\n                        var lo = string.charCodeAt(++i);\n                        c = 65536 | ((hi & 1023) << 10) | (lo & 1023);\n                        b.push(240 | (c >> 18), 128 | ((c >> 12) & 63), 128 | ((c >> 6) & 63), 128 | (c & 63));\n                    }\n                }\n                else {\n                    if ((c & 64512) == 56320) {\n                        // Invalid low surrogate.\n                        b.push(239, 191, 189);\n                    }\n                    else {\n                        b.push(224 | (c >> 12), 128 | ((c >> 6) & 63), 128 | (c & 63));\n                    }\n                }\n            }\n        }\n    }\n    return new Uint8Array(b);\n}\nexports.utf8Bytes_ = utf8Bytes_;\nfunction percentEncodedBytes_(string) {\n    var decoded;\n    try {\n        decoded = decodeURIComponent(string);\n    }\n    catch (e) {\n        throw errorsExports.invalidFormat(exports.StringFormat.DATA_URL, 'Malformed data URL.');\n    }\n    return utf8Bytes_(decoded);\n}\nexports.percentEncodedBytes_ = percentEncodedBytes_;\nfunction base64Bytes_(format, string) {\n    switch (format) {\n        case exports.StringFormat.BASE64: {\n            var hasMinus = string.indexOf('-') !== -1;\n            var hasUnder = string.indexOf('_') !== -1;\n            if (hasMinus || hasUnder) {\n                var invalidChar = hasMinus ? '-' : '_';\n                throw errorsExports.invalidFormat(format, \"Invalid character '\" +\n                    invalidChar +\n                    \"' found: is it base64url encoded?\");\n            }\n            break;\n        }\n        case exports.StringFormat.BASE64URL: {\n            var hasPlus = string.indexOf('+') !== -1;\n            var hasSlash = string.indexOf('/') !== -1;\n            if (hasPlus || hasSlash) {\n                var invalidChar = hasPlus ? '+' : '/';\n                throw errorsExports.invalidFormat(format, \"Invalid character '\" + invalidChar + \"' found: is it base64 encoded?\");\n            }\n            string = string.replace(/-/g, '+').replace(/_/g, '/');\n            break;\n        }\n    }\n    var bytes;\n    try {\n        bytes = atob(string);\n    }\n    catch (e) {\n        throw errorsExports.invalidFormat(format, 'Invalid character found');\n    }\n    var array = new Uint8Array(bytes.length);\n    for (var i = 0; i < bytes.length; i++) {\n        array[i] = bytes.charCodeAt(i);\n    }\n    return array;\n}\nexports.base64Bytes_ = base64Bytes_;\n/**\n * @struct\n */\nvar DataURLParts = /** @class */ (function () {\n    function DataURLParts(dataURL) {\n        this.base64 = false;\n        this.contentType = null;\n        var matches = dataURL.match(/^data:([^,]+)?,/);\n        if (matches === null) {\n            throw errorsExports.invalidFormat(exports.StringFormat.DATA_URL, \"Must be formatted 'data:[<mediatype>][;base64],<data>\");\n        }\n        var middle = matches[1] || null;\n        if (middle != null) {\n            this.base64 = endsWith(middle, ';base64');\n            this.contentType = this.base64\n                ? middle.substring(0, middle.length - ';base64'.length)\n                : middle;\n        }\n        this.rest = dataURL.substring(dataURL.indexOf(',') + 1);\n    }\n    return DataURLParts;\n}());\nfunction dataURLBytes_(string) {\n    var parts = new DataURLParts(string);\n    if (parts.base64) {\n        return base64Bytes_(exports.StringFormat.BASE64, parts.rest);\n    }\n    else {\n        return percentEncodedBytes_(parts.rest);\n    }\n}\nexports.dataURLBytes_ = dataURLBytes_;\nfunction dataURLContentType_(string) {\n    var parts = new DataURLParts(string);\n    return parts.contentType;\n}\nexports.dataURLContentType_ = dataURLContentType_;\nfunction endsWith(s, end) {\n    var longEnough = s.length >= end.length;\n    if (!longEnough) {\n        return false;\n    }\n    return s.substring(s.length - end.length) === end;\n}\n\n//# sourceMappingURL=string.js.map\n"]}]